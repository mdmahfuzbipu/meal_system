{% extends "base.html" %}

{% block page_title %}
<h2 class="text-2xl font-semibold text-gray-800">Request Detail</h2>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-8">
  <div class="bg-white p-6 rounded-xl shadow space-y-4">
    <h3 class="font-semibold text-lg">{{ request_obj.title }}</h3>
    <p class="text-gray-600">Date: {{ request_obj.requested_date }} | Meal: {{ request_obj.get_meal_type_display }}</p>
    <p class="text-gray-500">Created by: {{ request_obj.created_by.username }}</p>
    <p>Status: <span class="font-semibold">{{ request_obj.get_status_display }}</span></p>
    <p class="text-gray-700">Description: {{ request_obj.description }}</p>

    {% if request_obj.status == "pending" %}
    <form method="post">{% csrf_token %}
      <label for="response_note" class="block font-medium mt-4 mb-1">Notes (optional)</label>
      <textarea name="response_note" id="response_note" rows="3" class="w-full border rounded p-2"></textarea>
      <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded mt-2">
        Mark as Accepted
      </button>
    </form>
    {% else %}
      <p class="text-green-600 font-semibold">This request has been accepted.</p>
      {% if request_obj.response_note %}
      <p class="text-gray-500">Note: {{ request_obj.response_note }}</p>
      {% endif %}
    {% endif %}
  </div>

  <a href="{% url 'managers:manager_requests_list' %}" class="inline-block mt-4 text-blue-600 hover:underline">Back to Requests</a>
</div>
{% endblock %}
