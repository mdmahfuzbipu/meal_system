{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-4">
    <div class="card shadow-lg rounded-4 p-4 border-0">
        <div class="row g-4 align-items-center">

            <!-- Left: Profile Picture & Summary -->
            <div class="col-md-4 text-center">
                <div class="bg-light p-4 rounded-4 shadow-sm">
                    <div class="position-relative d-inline-block mb-3">
                        {% if details and details.profile_picture %}
                            <img src="{{ details.profile_picture.url }}" 
                                alt="Profile Photo" 
                                class="rounded-circle border border-3 border-primary shadow"
                                style="width: 150px; height: 150px; object-fit: cover;">
                        {% else %}
                            <img src="{% static 'images/default_profile.png' %}" 
                                alt="Default Profile" 
                                class="rounded-circle border border-3 border-secondary shadow"
                                style="width: 150px; height: 150px; object-fit: cover;">
                        {% endif %}
                    </div>
                    <h4 class="fw-bold text-dark mb-1">{{ student.name }}</h4>
                    <p class="text-muted small mb-0">
                        Room {{ student.room_number }}
                    </p>
                    <p class="text-muted small mb-1">
                        <i class="bi bi-envelope"></i> {{ student.user.email }}
                    </p>
                    <hr class="mt-3 mb-2">
                    <p class="text-muted small mb-0">Hostel Resident</p>
                </div>
            </div>

            <!-- Right: Student Details -->
            <div class="col-md-8">
                <h4 class="fw-bold border-bottom pb-2 mb-3 text-primary">Personal Information</h4>

                <div class="row mb-3">
                    <div class="col-md-6"><strong>Full Name:</strong> {{ student.name }}</div>
                    <div class="col-md-6"><strong>Room Number:</strong> {{ student.room_number }}</div>
                </div>

                {% if details %}
                <div class="row mb-3">
                    <div class="col-md-6"><strong>University ID:</strong> {{ details.university_id }}</div>
                    <div class="col-md-6"><strong>Department:</strong> {{ details.department }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6"><strong>Batch:</strong> {{ details.batch }}</div>
                    <div class="col-md-6"><strong>Date of Birth:</strong> {{ details.date_of_birth|date:"F j, Y" }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6"><strong>Phone:</strong> {{ details.phone_number }}</div>
                    <div class="col-md-6"><strong>Guardian Phone:</strong> {{ details.guardian_phone }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-12"><strong>Address:</strong> {{ details.address }}</div>
                </div>
                {% else %}
                <p class="text-danger">
                    No detailed profile found. Please contact your hostel manager to update your information.
                </p>
                {% endif %}

                <h4 class="fw-bold border-bottom pb-2 mt-4 mb-3 text-primary">Meal Preferences</h4>
                <div class="row">
                    <div class="col-md-6">
                        <strong>Beef Preference:</strong>
                        {% if student.default_prefers_beef %}
                            <span class="badge bg-success ms-2">Beef</span>
                        {% else %}
                            <span class="badge bg-warning text-dark ms-2">Mutton</span>
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        <strong>Fish Preference:</strong>
                        {% if student.default_prefers_fish %}
                            <span class="badge bg-success ms-2">Fish</span>
                        {% else %}
                            <span class="badge bg-warning text-dark ms-2">Egg</span>
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}
